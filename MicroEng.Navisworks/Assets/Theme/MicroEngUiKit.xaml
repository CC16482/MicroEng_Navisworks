<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml">
  <!--
    Legacy MicroEng style tokens.
    Kept for backwards compatibility with older XAML references.
    New UI should prefer WPF-UI resources where possible.
  -->

  <!-- Brushes -->
  <!-- Prefer WPF-UI's design-guidance colors (see Wpf.Ui.Gallery ColorsPage). -->
  <!--
    NOTE: Do NOT declare <DynamicResource .../> as a resource value.
    That creates a DynamicResourceExtension object (not a Brush) and causes runtime XamlParseException
    ("Provide value on StaticResourceHolder...").
    Instead, create real brushes whose Color comes from WPF-UI dynamic theme resources.
  -->
  <SolidColorBrush x:Key="AppBackgroundBrush" Color="{DynamicResource ApplicationBackgroundColor}" />
  <SolidColorBrush x:Key="CardBackgroundBrush" Color="{DynamicResource CardBackgroundFillColorDefault}" />
  <SolidColorBrush x:Key="CardBorderBrush" Color="{DynamicResource ControlStrokeColorDefault}" />
  <SolidColorBrush x:Key="TextPrimaryBrush" Color="{DynamicResource TextFillColorPrimary}" />
  <SolidColorBrush x:Key="TextPrimary" Color="{DynamicResource TextFillColorPrimary}" />
  <SolidColorBrush x:Key="TextSecondaryBrush" Color="{DynamicResource TextFillColorSecondary}" />
  <SolidColorBrush x:Key="TextSecondary" Color="{DynamicResource TextFillColorSecondary}" />
  <!-- Ensure primary/secondary text brushes exist even if theme dictionaries fail to load. -->
  <SolidColorBrush x:Key="TextFillColorPrimaryBrush" Color="{DynamicResource TextFillColorPrimary}" />
  <SolidColorBrush x:Key="TextFillColorSecondaryBrush" Color="{DynamicResource TextFillColorSecondary}" />
  <!-- Use the base accent so MicroEng "accent" stays consistent across controls (matches Gallery expectation). -->
  <SolidColorBrush x:Key="AccentBrush" Color="{DynamicResource SystemAccentColor}" />
  <SolidColorBrush x:Key="AccentStrongBrush" Color="{DynamicResource SystemAccentColor}" />

  <!-- DataGrid grid lines -->
  <Color x:Key="MicroEngDataGridGridLineColor">#C0C0C0</Color>
  <SolidColorBrush x:Key="MicroEngDataGridGridLineBrush"
                   Color="{DynamicResource MicroEngDataGridGridLineColor}"
                   Opacity="0.55" />

  <!-- Spacing -->
  <Thickness x:Key="PagePadding">12</Thickness>
  <Thickness x:Key="SectionPadding">10</Thickness>
  <Thickness x:Key="SectionMargin">0,0,0,8</Thickness>

  <!-- Typography -->
  <Style x:Key="PageTitleText" TargetType="TextBlock">
    <Setter Property="FontSize" Value="18" />
    <Setter Property="FontWeight" Value="SemiBold" />
    <!-- Use WPF-UI brush directly so theme switching updates correctly. -->
    <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}" />
    <Setter Property="Margin" Value="0,0,0,6" />
  </Style>

  <Style x:Key="SectionTitleText" TargetType="TextBlock">
    <Setter Property="FontSize" Value="14" />
    <Setter Property="FontWeight" Value="SemiBold" />
    <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}" />
    <Setter Property="Margin" Value="0,0,0,6" />
  </Style>

  <Style x:Key="SubtleText" TargetType="TextBlock">
    <Setter Property="Foreground" Value="{DynamicResource TextFillColorSecondaryBrush}" />
    <Setter Property="FontSize" Value="12" />
  </Style>

  <!--
    IMPORTANT:
    Many MicroEng views still use plain WPF TextBlock/Label for form labels.
    WPF-UI sets themed Foregrounds via Control.Foreground, but TextBlock doesn't inherit that reliably,
    which can leave text black-on-dark (or white-on-light).
    Provide a safe implicit Foreground for these text elements based on WPF-UI theme colors.
  -->
  <Style TargetType="TextBlock">
    <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}" />
  </Style>

  <Style TargetType="Label">
    <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}" />
  </Style>

  <Style x:Key="MonoText" TargetType="TextBox">
    <Setter Property="FontFamily" Value="Consolas" />
    <Setter Property="FontSize" Value="11" />
  </Style>

  <!-- Card -->
  <Style x:Key="CardBorder" TargetType="Border">
    <Setter Property="Background" Value="{DynamicResource CardBackgroundFillColorDefaultBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource ControlStrokeColorDefaultBrush}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="CornerRadius" Value="8" />
    <Setter Property="Padding" Value="{StaticResource SectionPadding}" />
    <Setter Property="Margin" Value="{StaticResource SectionMargin}" />
  </Style>

  <!-- Buttons -->
  <Style x:Key="PrimaryButtonStyle" TargetType="Button">
    <Setter Property="Padding" Value="12,6" />
    <Setter Property="Margin" Value="4" />
    <!-- Prefer WPF-UI tokens (avoids "white on white" when accent is set to white). -->
    <Setter Property="Foreground" Value="{DynamicResource TextOnAccentFillColorPrimaryBrush}" />
    <Setter Property="Background" Value="{DynamicResource AccentFillColorDefaultBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource AccentFillColorDefaultBrush}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="FontWeight" Value="SemiBold" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Button">
          <Border Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  CornerRadius="6"
                  Padding="{TemplateBinding Padding}">
            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
          </Border>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}" />

  <Style x:Key="SecondaryButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}">
    <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}" />
    <Setter Property="Background" Value="{DynamicResource ControlFillColorDefaultBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource ControlStrokeColorDefaultBrush}" />
  </Style>

  <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource SecondaryButtonStyle}" />

  <Style x:Key="ToolbarButtonStyle" TargetType="Button" BasedOn="{StaticResource SecondaryButtonStyle}">
    <Setter Property="Padding" Value="10,4" />
    <Setter Property="Margin" Value="2" />
  </Style>

  <!-- Inputs -->
  <!--
    NOTE: Do NOT override implicit styles for TextBox/ComboBox/CheckBox/RadioButton.
    WPF-UI already provides Gallery-consistent styles (ComboBoxPage/RadioButtonPage/etc).
    Overriding them removes accents and breaks the WPF-UI look.
  -->

  <!--
    DataGrids:
    Do NOT override WPF-UI's implicit ui:DataGrid style (it provides the dark/light visuals).
    Instead, set gridline brushes directly on each DataGrid instance where needed.
  -->
</ResourceDictionary>
