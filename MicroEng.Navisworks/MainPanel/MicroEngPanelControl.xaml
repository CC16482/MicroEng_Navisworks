<UserControl x:Class="MicroEng.Navisworks.MicroEngPanelControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:MicroEng.Navisworks"
             xmlns:system="clr-namespace:System;assembly=System"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             mc:Ignorable="d"
             d:DesignHeight="520" d:DesignWidth="380"
             MinWidth="360"
             MinHeight="520"
             Background="{DynamicResource ApplicationBackgroundBrush}"
             Foreground="{DynamicResource TextFillColorPrimaryBrush}"
             FontSize="12">

  <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="{x:Static local:MicroEngResourceUris.WpfUiRoot}" />
      </ResourceDictionary.MergedDictionaries>
      <system:Double x:Key="ControlContentThemeFontSize">12</system:Double>
      <Style x:Key="ToolCardActionStyle"
             TargetType="ui:CardAction"
             BasedOn="{StaticResource {x:Type ui:CardAction}}">
        <Setter Property="Margin" Value="0,0,0,10" />
        <Setter Property="Padding" Value="14,12" />
        <Setter Property="MinHeight" Value="64" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Background" Value="{DynamicResource CardBackgroundFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{DynamicResource ControlStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="IsChevronVisible" Value="True" />
        <Style.Triggers>
          <Trigger Property="Tag" Value="True">
            <Setter Property="Background" Value="{DynamicResource CardBackgroundPressed}" />
            <Setter Property="BorderBrush" Value="{DynamicResource AccentFillColorDefaultBrush}" />
            <Setter Property="BorderThickness" Value="2,1,1,1" />
          </Trigger>
        </Style.Triggers>
      </Style>
      <Style x:Key="ToolCardIconStyle" TargetType="ui:SymbolIcon">
        <Setter Property="FontSize" Value="26" />
        <Setter Property="Filled" Value="False" />
      </Style>
      <Style x:Key="LogActionButtonStyle"
             TargetType="ui:Button"
             BasedOn="{StaticResource {x:Type ui:Button}}">
        <Setter Property="Padding" Value="6,3" />
      </Style>
    </ResourceDictionary>
  </UserControl.Resources>

  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <!-- Use ui:Card for layout containers (CardControl offsets Content to the right by design). -->
    <ui:Card Grid.Row="0"
             Padding="20,12"
             Margin="0,0,0,12"
             HorizontalAlignment="Stretch"
             HorizontalContentAlignment="Stretch"
             VerticalContentAlignment="Top">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <StackPanel Width="128"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center">
          <Image x:Name="HeaderLogoImage"
                 Width="128"
                 Height="37"
                 Margin="0,0,0,4"
                 Stretch="Uniform"
                 HorizontalAlignment="Center"
                 VerticalAlignment="Center"
                 Visibility="Collapsed" />
          <ui:TextBlock Text="NavisTools"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Margin="-2,0,0,0"
                        HorizontalAlignment="Center"
                        TextAlignment="Center"
                        VerticalAlignment="Center" />
        </StackPanel>

        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="12,0,0,0">
          <ui:TextBlock x:Name="ThemeModeLabel" Text="Dark Mode" VerticalAlignment="Center" Margin="0,0,8,0" />
          <ui:ToggleSwitch x:Name="ThemeToggle" OffContent="" OnContent="" />
          <ui:Button Margin="10,0,0,0"
                     Width="36"
                     Height="30"
                     Padding="0"
                     ToolTip="Settings"
                     Click="Settings_Click">
            <ui:SymbolIcon Symbol="Settings20"
                           Filled="False"
                           FontSize="20" />
          </ui:Button>
        </StackPanel>
      </Grid>
    </ui:Card>

    <StackPanel Grid.Row="1" Margin="0">
      <ui:CardAction x:Name="DataScraperButton"
                     Style="{StaticResource ToolCardActionStyle}"
                     Click="DataScraper_Click">
        <ui:CardAction.Icon>
          <ui:SymbolIcon Symbol="DatabaseLightning20" Style="{StaticResource ToolCardIconStyle}" />
        </ui:CardAction.Icon>
        <StackPanel>
          <ui:TextBlock FontTypography="BodyStrong" Text="Data Scraper" TextWrapping="Wrap" Margin="0,0,0,2" />
          <ui:TextBlock Appearance="Secondary" Text="Scan model properties into cache." TextWrapping="Wrap" />
        </StackPanel>
      </ui:CardAction>

      <ui:CardAction x:Name="DataMapperButton"
                     Style="{StaticResource ToolCardActionStyle}"
                     Click="AppendData_Click">
        <ui:CardAction.Icon>
          <ui:SymbolIcon Symbol="DocumentArrowRight24" Style="{StaticResource ToolCardIconStyle}" />
        </ui:CardAction.Icon>
        <StackPanel>
          <ui:TextBlock FontTypography="BodyStrong" Text="Data Mapper" TextWrapping="Wrap" Margin="0,0,0,2" />
          <ui:TextBlock Appearance="Secondary" Text="Append mapped data to selection." TextWrapping="Wrap" />
        </StackPanel>
      </ui:CardAction>

      <ui:CardAction x:Name="DataMatrixButton"
                     Style="{StaticResource ToolCardActionStyle}"
                     Click="DataMatrix_Click">
        <ui:CardAction.Icon>
          <ui:SymbolIcon Symbol="TableSettings28" Style="{StaticResource ToolCardIconStyle}" />
        </ui:CardAction.Icon>
        <StackPanel>
          <ui:TextBlock FontTypography="BodyStrong" Text="Data Matrix" TextWrapping="Wrap" Margin="0,0,0,2" />
          <ui:TextBlock Appearance="Secondary" Text="Browse scraped data in a grid." TextWrapping="Wrap" />
        </StackPanel>
      </ui:CardAction>

      <ui:CardAction x:Name="TreeMapperButton"
                     Style="{StaticResource ToolCardActionStyle}"
                     Click="TreeMapper_Click">
        <ui:CardAction.Icon>
          <ui:SymbolIcon Symbol="BranchFork20"
                         Style="{StaticResource ToolCardIconStyle}"
                         RenderTransformOrigin="0.5,0.5">
            <ui:SymbolIcon.RenderTransform>
              <ScaleTransform ScaleY="-1" />
            </ui:SymbolIcon.RenderTransform>
          </ui:SymbolIcon>
        </ui:CardAction.Icon>
        <StackPanel>
          <ui:TextBlock FontTypography="BodyStrong" Text="Tree Mapper" TextWrapping="Wrap" Margin="0,0,0,2" />
          <ui:TextBlock Appearance="Secondary" Text="Build a custom selection tree." TextWrapping="Wrap" />
        </StackPanel>
      </ui:CardAction>

      <ui:CardAction x:Name="SmartSetsButton"
                     Style="{StaticResource ToolCardActionStyle}"
                     Click="SmartSetGenerator_Click">
        <ui:CardAction.Icon>
          <ui:SymbolIcon Symbol="TextBulletListAdd20" Style="{StaticResource ToolCardIconStyle}" />
        </ui:CardAction.Icon>
        <StackPanel>
          <ui:TextBlock FontTypography="BodyStrong" Text="Smart Set Generator" TextWrapping="Wrap" Margin="0,0,0,2" />
          <ui:TextBlock Appearance="Secondary" Text="Build Search and Selection Sets fast." TextWrapping="Wrap" />
        </StackPanel>
      </ui:CardAction>

      <ui:CardAction x:Name="ViewpointsGeneratorButton"
                     Style="{StaticResource ToolCardActionStyle}"
                     Click="ViewpointsGenerator_Click">
        <ui:CardAction.Icon>
          <ui:SymbolIcon Symbol="Camera24" Style="{StaticResource ToolCardIconStyle}" />
        </ui:CardAction.Icon>
        <StackPanel>
          <ui:TextBlock FontTypography="BodyStrong" Text="Viewpoints Generator" TextWrapping="Wrap" Margin="0,0,0,2" />
          <ui:TextBlock Appearance="Secondary" Text="Batch-create Saved Viewpoints." TextWrapping="Wrap" />
        </StackPanel>
      </ui:CardAction>

      <ui:CardAction x:Name="QuickColourButton"
                     Style="{StaticResource ToolCardActionStyle}"
                     Click="QuickColour_Click">
        <ui:CardAction.Icon>
          <ui:SymbolIcon Symbol="PaintBrush20" Style="{StaticResource ToolCardIconStyle}" />
        </ui:CardAction.Icon>
        <StackPanel>
          <ui:TextBlock FontTypography="BodyStrong" Text="Quick Colour" TextWrapping="Wrap" Margin="0,0,0,2" />
          <ui:TextBlock Appearance="Secondary" Text="Hierarchy-based colour profiles." TextWrapping="Wrap" />
        </StackPanel>
      </ui:CardAction>

      <ui:CardAction x:Name="SpaceMapperButton"
                     Style="{StaticResource ToolCardActionStyle}"
                     Click="SpaceMapper_Click">
        <ui:CardAction.Icon>
          <ui:SymbolIcon Symbol="BoxMultiple20" Style="{StaticResource ToolCardIconStyle}" />
        </ui:CardAction.Icon>
        <StackPanel>
          <ui:TextBlock FontTypography="BodyStrong" Text="Space Mapper" TextWrapping="Wrap" Margin="0,0,0,2" />
          <ui:TextBlock Appearance="Secondary" Text="Map targets to zones and write back." TextWrapping="Wrap" />
        </StackPanel>
      </ui:CardAction>

      <ui:CardAction x:Name="Sequence4DButton"
                     Style="{StaticResource ToolCardActionStyle}"
                     Margin="0"
                     Click="Sequence4D_Click">
        <ui:CardAction.Icon>
          <ui:SymbolIcon Symbol="CalendarPlay24" Style="{StaticResource ToolCardIconStyle}" />
        </ui:CardAction.Icon>
        <StackPanel>
          <ui:TextBlock FontTypography="BodyStrong" Text="4D Sequence" TextWrapping="Wrap" Margin="0,0,0,2" />
          <ui:TextBlock Appearance="Secondary" Text="Build Timeliner task sequences." TextWrapping="Wrap" />
        </StackPanel>
      </ui:CardAction>
    </StackPanel>

    <ui:Card Grid.Row="2"
             Padding="20,12,20,12"
             Margin="0,12,0,0"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Stretch"
             HorizontalContentAlignment="Stretch"
             VerticalContentAlignment="Stretch">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0" Margin="0,0,0,8">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
          </Grid.ColumnDefinitions>
          <ui:TextBlock Grid.Column="0" Text="Log" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center" />
          <StackPanel Grid.Column="1" Orientation="Horizontal">
            <ui:Button Style="{StaticResource LogActionButtonStyle}"
                       Margin="0,0,6,0"
                       ToolTip="Clear log"
                       Click="ClearLog_Click">
              <ui:TextBlock Text="Clear" />
            </ui:Button>
            <ui:Button Style="{StaticResource LogActionButtonStyle}"
                       ToolTip="Copy log to clipboard"
                       Click="CopyLog_Click">
              <ui:TextBlock Text="Copy" />
            </ui:Button>
          </StackPanel>
        </Grid>
        <RichTextBox x:Name="LogTextBox"
                     Grid.Row="1"
                     IsReadOnly="True"
                     IsUndoEnabled="False"
                     SpellCheck.IsEnabled="False"
                     Margin="0"
                     VerticalAlignment="Stretch"
                     VerticalScrollBarVisibility="Auto"
                     FontFamily="Consolas"
                     FontSize="12"
                     Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                     BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                     BorderThickness="1"
                     Padding="8">
          <FlowDocument PagePadding="0"
                        TextAlignment="Left"
                        FontFamily="Consolas"
                        FontSize="12" />
        </RichTextBox>
      </Grid>
    </ui:Card>
  </Grid>
</UserControl>
