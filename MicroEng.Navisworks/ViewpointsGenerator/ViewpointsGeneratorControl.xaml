<UserControl x:Class="MicroEng.Navisworks.ViewpointsGenerator.ViewpointsGeneratorControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:MicroEng.Navisworks"
             xmlns:system="clr-namespace:System;assembly=System"
             mc:Ignorable="d"
             d:DesignHeight="640"
             d:DesignWidth="900"
             Background="{DynamicResource ApplicationBackgroundBrush}"
             Foreground="{DynamicResource TextFillColorPrimaryBrush}"
             FontSize="12">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="{x:Static local:MicroEngResourceUris.WpfUiRoot}" />
            </ResourceDictionary.MergedDictionaries>
            <system:Double x:Key="ControlContentThemeFontSize">12</system:Double>
            <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <DockPanel Grid.Row="0" Margin="0,0,0,12">
            <TextBlock Text="Viewpoints Generator" FontSize="18" FontWeight="SemiBold" />
        </DockPanel>

        <Border Grid.Row="1"
                Padding="12"
                CornerRadius="6"
                BorderThickness="1"
                BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="160" />
                    <ColumnDefinition Width="260" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="160" />
                    <ColumnDefinition Width="260" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="10" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="Source:" VerticalAlignment="Center" />
                <ComboBox Grid.Row="0" Grid.Column="1"
                          ItemsSource="{Binding SourceModes}"
                          SelectedItem="{Binding Settings.SourceMode}"
                          MinWidth="220" />

                <TextBlock Grid.Row="0" Grid.Column="3" Text="Output folder:" VerticalAlignment="Center" />
                <TextBox Grid.Row="0" Grid.Column="4"
                         Text="{Binding Settings.OutputFolderPath}"
                         MinWidth="220" />

                <TextBlock Grid.Row="2" Grid.Column="0" Text="View direction:" VerticalAlignment="Center" />
                <ComboBox Grid.Row="2" Grid.Column="1"
                          ItemsSource="{Binding DirectionPresets}"
                          SelectedItem="{Binding Settings.Direction}"
                          MinWidth="220" />

                <TextBlock Grid.Row="2" Grid.Column="3" Text="Projection:" VerticalAlignment="Center" />
                <ComboBox Grid.Row="2" Grid.Column="4"
                          ItemsSource="{Binding ProjectionModes}"
                          SelectedItem="{Binding Settings.Projection}"
                          MinWidth="220" />
            </Grid>
        </Border>

        <Grid Grid.Row="2" Margin="0,12,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0"
                    Width="340"
                    Padding="12"
                    CornerRadius="6"
                    BorderThickness="1"
                    BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                    Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                    Visibility="{Binding IsSelectionSetMode, Converter={StaticResource BoolToVisibilityConverter}}">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Selection/Search Sets" FontWeight="SemiBold" />
                        <Button Content="Refresh" Margin="12,0,0,0" Padding="10,4" Click="RefreshSets_Click" />
                    </StackPanel>

                    <DataGrid ItemsSource="{Binding SelectionSets}"
                              AutoGenerateColumns="False"
                              HeadersVisibility="Column"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              IsReadOnly="False"
                              FontSize="12"
                              RowHeight="26">
                        <DataGrid.Columns>
                            <DataGridCheckBoxColumn Header="On" Binding="{Binding Enabled}" Width="40" />
                            <DataGridTextColumn Header="Set" Binding="{Binding Path}" Width="*" />
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </Border>

            <Border Grid.Column="1"
                    Margin="12,0,0,0"
                    Padding="12"
                    CornerRadius="6"
                    BorderThickness="1"
                    BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                    Background="{DynamicResource CardBackgroundFillColorDefaultBrush}">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Preview Plan" FontWeight="SemiBold" />
                        <Button Content="Preview" Margin="12,0,0,0" Padding="10,4" Click="Preview_Click" />
                    </StackPanel>

                    <DataGrid ItemsSource="{Binding Plan}"
                              AutoGenerateColumns="False"
                              HeadersVisibility="Column"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              IsReadOnly="False"
                              FontSize="12"
                              RowHeight="26">
                        <DataGrid.Columns>
                            <DataGridCheckBoxColumn Header="On" Binding="{Binding Enabled}" Width="40" />
                            <DataGridTextColumn Header="Viewpoint Name" Binding="{Binding Name}" Width="*" />
                            <DataGridTextColumn Header="Source" Binding="{Binding Source}" Width="260" />
                            <DataGridTextColumn Header="Count" Binding="{Binding ItemCount}" Width="70" />
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </Border>
        </Grid>

        <DockPanel Grid.Row="3">
            <TextBlock Text="{Binding StatusText}"
                       VerticalAlignment="Center"
                       Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" DockPanel.Dock="Right">
                <Button Content="Generate" Padding="14,6" Margin="8,0,0,0" Click="Generate_Click" />
            </StackPanel>
        </DockPanel>
    </Grid>
</UserControl>
